{"version":3,"sources":["components/SearchForm.js","Home.js","components/Paginations.js","components/ResultItem.js","components/Loader.js","ResultsPage.js","App.js","index.js"],"names":["SearchForm","props","navigate","useNavigate","useState","currentSearch","state","setState","loadingState","loadindState","className","onSubmit","event","preventDefault","type","id","placeholder","value","onChange","target","disabled","role","onClick","Home","Paginations","currentPage","totalPages","pages","i","item","push","ResultItem","nom","activitePrincipale","Loader","ResultsPage","loading","error","result","nothingFound","useParams","searchText","useEffect","a","fetch","response","ok","status","json","responseData","console","total_results","etablissement","map","nom_raison_sociale","libelle_activite_principale","total_pages","NotFoundPage","style","padding","to","App","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.901925d8.chunk.js","sourcesContent":["import {useNavigate} from \"react-router-dom\";\nimport {useState} from \"react\";\n\nconst SearchForm = (props) => {\n    const navigate = useNavigate()\n    const [state, setState] = useState(props.currentSearch || \"\")\n    const loadingState = props.loadindState || false\n\n    const handleTextChange = event => {\n        setState(event.target.value)\n    }\n\n    return(\n        <form className={\"row\"} onSubmit={(event) => {\n            //prevent the submit event from triggering the page reload\n            event.preventDefault()\n            ; navigate(`/resultats/${state}/1`)}\n        }>\n            <div className=\"col-sm-12 col-md-9 my-1 ps-0\">\n                <input type=\"search\" className=\"form-control\" id=\"searchText\" placeholder=\"Entrez un nom, un siret ou un siren\" value={state} onChange={handleTextChange}/>\n            </div>\n            <div className=\"col-sm-12 col-md-3 my-1 pe-0\">\n                {loadingState && <button className=\"btn btn-primary w-100\" disabled type=\"button\">\n                    <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"/>\n                    <span className={\"d-sm-none\"}>Recherche en cours</span>\n                </button>}\n                {!loadingState && <button className=\"btn btn-primary w-100\" type=\"button\" onClick={() => navigate(`/resultats/${state}/1`)}>\n                    Lancer\n                </button>}\n            </div>\n        </form>\n    )\n}\n\n\nexport default SearchForm","import SearchForm from \"./components/SearchForm\";\n\nconst Home = () => {\n    return (\n        <div className={\"row\"}>\n            <h1 className={\"text-center my-4\"}>Annuaire des entreprises en France</h1>\n            <SearchForm/>\n            <p className={\"text-primary text-center fs-4 my-3\"}>Retrouvez toutes les informations publiques concernant les entreprises françaises</p>\n        </div>\n    )\n}\n\nexport default Home","import {useNavigate} from \"react-router-dom\";\n\nexport const Paginations = (props) => {\n    const navigate = useNavigate()\n    const currentPage = props.currentPage\n    let totalPages = props.totalPages\n    const currentSearch = props.currentSearch\n\n    let pages = [];\n    for (let i = 1; i <= (totalPages); i++) {\n        if (totalPages > 10){\n            //limit the maximum pages to 10 to avoid incredible number of paginations\n            totalPages = 10\n        }\n        const item =  <li key={`page-${i}`} className={`page-item ${(i - currentPage === 0) ? \"active\" : \"\" }`}>\n            <button className=\"page-link\" onClick={() => navigate(`/resultats/${currentSearch}/${i}`)}>{i}</button>\n        </li>\n        pages.push(item)\n    }\n\n    return(\n        <nav className={\"row my-3\"}>\n            <ul className=\"pagination flex-wrap justify-content-center\">\n                <li className={`page-item ${currentPage - 1 === 0 ? \"disabled\" : \"\" }`}>\n                    <button className=\"page-link\" onClick={() => navigate(`/resultats/${currentSearch}/${(currentPage * 1) - 1}`)}>Précédent</button>\n                </li>\n                {pages}\n                <li className={`page-item ${currentPage - totalPages === 0 ? \"disabled\" : \"\" }`}>\n                    <button className=\"page-link\" onClick={() => navigate(`/resultats/${currentSearch}/${(currentPage * 1) + 1}`)}>Suivant</button>\n                </li>\n            </ul>\n        </nav>\n    )\n\n}","export const ResultItem = (props) => {\n    const {nom, activitePrincipale} = props\n\n    return (\n        <div className=\"card border-0 col-sm-12 col-md-4\">\n            <div className=\"card-body rounded-2 bg-light custom-shadow  my-2 mx-2\">\n                <h5 className=\"card-title\">{nom}</h5>\n                <p className=\"card-text\">{activitePrincipale}</p>\n                {/** @TODO add single enterprise page and pass it enterprise siren trough urls params**/}\n                <button className=\"btn btn-primary disabled\">Voir plus</button>\n            </div>\n        </div>\n    )\n\n}\n\n","export const Loader = () => (\n    <div className=\"col-12 my-5 d-flex justify-content-center align-items-center\">\n        <div className=\"spinner-border text-primary\" role=\"status\"/>\n        <span className=\"sr-only\"> &nbsp; Chargement...</span>\n    </div>\n)","import {useParams} from \"react-router-dom\";\nimport SearchForm from \"./components/SearchForm\";\nimport {useEffect, useState} from \"react\";\nimport {Paginations} from \"./components/Paginations\";\nimport {ResultItem} from \"./components/ResultItem\";\nimport {Loader} from \"./components/Loader\";\n\nconst ResultsPage = () => {\n    const [state, setState] = useState({loading: true, error: false, result: null, nothingFound: false})\n    const {searchText, currentPage} = useParams();\n\n    useEffect(() => {\n        (\n            async () => {\n                //set loading state\n                setState(state => ({...state ,loading: true, error: false}))\n                try{\n                    //get response from api call\n                    const response = await fetch(`https://entreprise.data.gouv.fr/api/sirene/v1/full_text/${searchText}?per_page=12&page=${currentPage}`)\n                    if (response.ok && response.status !== 404){\n                        const responseData = await response.json()\n                        //set result state with response datas and disable loading state\n                        setState(state => ({...state ,loading: false, error: false, result: responseData, nothingFound: false}))\n                    }\n                    if (response.status === 404){\n                        const responseData = await response.json()\n                        console.error(responseData)\n                        //set result state with response datas and disable loading state\n                        setState(state => ({...state ,loading: false, error: false, result: null, nothingFound: true}))\n                    }\n                } catch (error) {\n                    // set error data and disable loading state\n                    console.error(error)\n                    setState(state => ({...state ,loading: false, error: true, result: error, nothingFound: false}))\n                }\n            }\n        )()\n    }, [currentPage, searchText])\n\n    return (\n        <div className={\"row mt-2\"}>\n            <h1 className={\"text-center my-4\"}>Annuaire des entreprises en France</h1>\n            <SearchForm currentSearch={searchText} loadindState={state.loading}/>\n            <div className=\"row\">\n                {//display if there's an error\n                    state.error && <div className=\"col-12 py-3\">\n                    <p className=\"text-danger\">Oops, il y a eu une erreur. Essayez de relancer la recherche ou vérifiez votre connexion</p>\n                </div>}\n\n                {//display result items only if there's a result that isn't an error and if the page is not loading\n                    state.nothingFound && <p className={\"text-center py-3\"}>🤔 Nous n'avons rien trouvé qui ressemble à \"{searchText}\". Vérifiez l'orthographe ou changez de recherche.</p>\n                }\n\n                {//display if the page is loading\n                    state.loading && <Loader/>}\n\n                {//display result items only if there's a result that isn't an error and if the page is not loading\n                    (state.result != null && !state.loading && !state.error) && <div className=\"container mt-3\">\n                        <h2>{state.result.total_results} {(state.result.total_results > 1) ? \"résultats trouvés\" : \"résultat touvé\"} pour \"{searchText}\"</h2>\n                        {(state.result.total_results > 1000) && <p className={\"alert-warning p-1 rounded-1\"}>😳 Ça fait beaucoup là. Essayez d'affiner votre recherche pour un résultat précis.</p>}\n                        <div className=\"row\">\n                            {\n                                state.result.etablissement.map(item => (\n                                    <ResultItem key={item.id} nom={item.nom_raison_sociale} activitePrincipale={item.libelle_activite_principale}/>\n                                ))\n                            }\n                        </div>\n                        {(state.result.total_pages >= 1) && <Paginations totalPages={state.result.total_pages} currentSearch={searchText} currentPage={currentPage}/>}\n                    </div>}\n            </div>\n        </div>\n    )\n}\n\nexport default ResultsPage","import {Link, Route, Routes} from \"react-router-dom\";\nimport Home from \"./Home\";\nimport ResultsPage from \"./ResultsPage\";\n\n\nconst App = () => {\n    return(\n        <div className=\"App\">\n            <header className={\"container-fluid px-0\"}>\n                <nav className=\"px-2 navbar navbar-expand-lg navbar-light bg-light justify-content-between\">\n                    <Link to={\"/\"} className={\"navbar-brand\"}>Annuaire d'entreprises</Link>\n                    <span className=\"navbar-tex\"> Toutes les données publics des entreprises en France</span>\n                </nav>\n            </header>\n            <main className={\"container\"}>\n                <Routes>\n                    <Route path=\"/\" element={<Home />} />\n                    <Route path=\"resultats/:searchText/:currentPage\" element={<ResultsPage />} />\n                    <Route path=\"*\" element={<NotFoundPage/>}/>\n                </Routes>\n            </main>\n        </div>\n    )\n}\n\nconst NotFoundPage = () => (\n    <div className={\"row d-flex h-100 align-items-center\"} style={{ padding: \"1rem\" }}>\n        <h1 className={\"text-center\"}>Erreur 404, Page non trouvé </h1>\n        <button className={\"btn btn-primary\"}>\n            <Link to={\"/\"}>Retour à la page d'acceuil</Link>\n        </button>\n    </div>\n)\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <BrowserRouter>\n          <App />\n      </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}